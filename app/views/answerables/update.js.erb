
<% create ||= false %>

if ($('#answerable').is(':visible')) {
  $("#sph .blocks").children().last().replaceWith("<%= (j render 'askables/answer_block').html_safe %>");
  $("#sph .blocks .update .cell").effect('highlight')
  $('#spb').removeClass('lower');
}

$("#answerable").replaceWith("<%= (j render 'askables/answerable').html_safe %>")

<% if create %>
    $("#answers h2").html("<%= @askable.answerables.size %> people have voted");
<% else %>
  if ($('#answerable_<%= @answerable.id %>').length)
    $('#answerable_<%= @answerable.id %>, #comment_<%= @answerable.id %>').remove();
<% end %>

div = $("<%= j (render 'askables/complex_item', :answerable => @answerable) %>").hide()
$("#answers h2").after(div)

div.find('.answerable_body').css('background', 'yellow')
div.show()
div.find('.answerable_body').animate({ backgroundColor: 'white' })

aac.eclipsis_init(div.find('.ellipsis'))
